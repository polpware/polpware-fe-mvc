<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>&quot;mediators/writable-abstract-list&quot; | Principleware typescript mvc (1.0.0)</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="../assets/js/search.js" data-base="..">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="../index.html" class="title">Principleware typescript mvc (1.0.0)</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="../globals.html">Globals</a>
				</li>
				<li>
					<a href="_mediators_writable_abstract_list_.html">&quot;mediators/writable-abstract-list&quot;</a>
				</li>
			</ul>
			<h1>External module &quot;mediators/writable-abstract-list&quot;</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<section class="tsd-panel-group tsd-index-group">
				<h2>Index</h2>
				<section class="tsd-panel tsd-index-panel">
					<div class="tsd-index-content">
						<section class="tsd-index-section ">
							<h3>Interfaces</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-interface tsd-parent-kind-external-module"><a href="../interfaces/_mediators_writable_abstract_list_.ichangeset.html" class="tsd-kind-icon">IChange<wbr>Set</a></li>
								<li class="tsd-kind-interface tsd-parent-kind-external-module"><a href="../interfaces/_mediators_writable_abstract_list_.iwritablelistmediatorctoroptions.html" class="tsd-kind-icon">IWritable<wbr>List<wbr>Mediator<wbr>Ctor<wbr>Options</a></li>
								<li class="tsd-kind-interface tsd-parent-kind-external-module"><a href="../interfaces/_mediators_writable_abstract_list_.iwritablelistmediatordev.html" class="tsd-kind-icon">IWritable<wbr>List<wbr>Mediator<wbr>Dev</a></li>
								<li class="tsd-kind-interface tsd-parent-kind-external-module"><a href="../interfaces/_mediators_writable_abstract_list_.iwritablelistmediatorpublic.html" class="tsd-kind-icon">IWritable<wbr>List<wbr>Mediator<wbr>Public</a></li>
							</ul>
						</section>
						<section class="tsd-index-section ">
							<h3>Variables</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-variable tsd-parent-kind-external-module"><a href="_mediators_writable_abstract_list_.html#writablelistmediator" class="tsd-kind-icon">Writable<wbr>List<wbr>Mediator</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-external-module tsd-is-not-exported"><a href="_mediators_writable_abstract_list_.html#_" class="tsd-kind-icon">_</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-external-module tsd-is-not-exported"><a href="_mediators_writable_abstract_list_.html#backbone" class="tsd-kind-icon">backbone</a></li>
							</ul>
						</section>
					</div>
				</section>
			</section>
			<section class="tsd-panel-group tsd-member-group ">
				<h2>Variables</h2>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-external-module">
					<a name="writablelistmediator" class="tsd-anchor"></a>
					<h3>Writable<wbr>List<wbr>Mediator</h3>
					<div class="tsd-signature tsd-kind-icon">Writable<wbr>List<wbr>Mediator<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol"> =&nbsp;ListMediator.extend({Properties: &#x27;viewLevelData,globalProvider&#x27;,init: function(settings: IWritableListMediatorCtorOptions) {const self: IWritableListMediatorDev &#x3D; this;self._super(settings);const CollectionCtor &#x3D; backbone.Collection.extend();self._viewLevelData &#x3D; new CollectionCtor();self._viewProviderListeners &#x3D; {};self._globalProvider &#x3D; settings.globalProvider || null;self._globalProviderListeners &#x3D; {};self._filterFlags &#x3D; settings.filterFlags || { added: true, removed: true, updated: true };},/*** A filter on the global data provider.* @returns {Boolean}*/globalProviderFilter: function(evtCtx: any, changeSet: IChangeSet, rest: any): IChangeSet {/*jslint unparam:true */const self: IWritableListMediatorDev &#x3D; this;if (self._filterFlags.added &amp;&amp;changeSet.changes.added &amp;&amp;changeSet.changes.added.length &gt; 0) {return changeSet;}if (self._filterFlags.removed &amp;&amp;changeSet.changes.removed &amp;&amp;changeSet.changes.removed.length &gt; 0) {return changeSet;}if (self._filterFlags.updated &amp;&amp;changeSet.changes.merged &amp;&amp;changeSet.changes.merged.length &gt; 0) {return changeSet;}return null;},/*** An internal method for listening to any change on the* global provider. Listening to the sole update event is* sufficient and efficent.* @param {Object} args*/onGlobalProviderUpdate: function() {/*jslint unparam:true */const self: IWritableListMediatorDev &#x3D; this;const args &#x3D; arguments;// If we are loading data, the data we are receiving is// the result of the current loading behavior.// We do not need to do anything. Instead, the loading behavior// is responsible for rending data.if (self._isLoadingData) {return;}// Shortcircuitconst changeSet &#x3D; self.globalProviderFilter.apply(self, args);if (!changeSet) {return;}// The interface of changeSet is determined by the above filter// method. However, the below view provider listener must be careful.// Changesif (changeSet.add) {const candidate &#x3D; _.filter(changeSet.changes.added, function(thisItem) {return !_.some(self._viewLevelData.models, function(thatItem) {return thisItem.id &#x3D;&#x3D;&#x3D; thatItem.id;});});if (candidate.length &gt; 0) {self._viewLevelData.add(candidate);}}if (changeSet.remove) {self._viewLevelData.remove(changeSet.changes.removed);}if (changeSet.merge) {// Keep propagatingself._viewLevelData.trigger(&#x27;update&#x27;, changeSet.changes);}},/*** An internal method for listening to the change on the view* data provider. Usually, such kind of listening shall be stopped* when there is no view binding to the current midiator list.* @param {Object} args*/onViewProviderUpdate: function(evtCtx: any, changeSet: IChangeSet, rest: any): void {/*jslint unparam:true */const self: IWritableListMediatorDev &#x3D; this;const $data &#x3D; self._viewInstance.$data;let newData: any;// Note that the interface of changeSet varies from// events to events in Backbone. We have to be very careful.if (changeSet.changes.added &amp;&amp; changeSet.changes.added.length &gt; 0) {// Check if we have data or notnewData &#x3D; self.generateItemsInternal(changeSet.changes.added);self.onUpdateView({add: true,source: &#x27;event&#x27;,data: newData});$data.asyncPrepend(newData);}if (changeSet.changes.removed &amp;&amp; changeSet.changes.removed.length &gt; 0) {newData &#x3D; self.generateItemsInternal(changeSet.changes.removed);self.onUpdateView({remove: true,source: &#x27;event&#x27;,data: newData});$data.asyncPop(newData);}if (changeSet.changes.merged &amp;&amp; changeSet.changes.merged.length &gt; 0) {newData &#x3D; self.generateItemsInternal(changeSet.changes.merged);self.onUpdateView({merge: true,source: &#x27;event&#x27;,data: newData});$data.asyncRefresh(newData);}},/*** Override.* So that we can clean up the view data.*/loadInitData: function() {const self: IWritableListMediatorDev &#x3D; this;self._viewLevelData.reset();return self._super();},/*** Starts to listen to the change on the global provider.* It is usually used internally on setting up this mediator.* @param {Object} globalProvider*/startListeningGlobalProvider: function(globalProvider) {const self: IWritableListMediatorDev &#x3D; this;const onUpdate &#x3D; function() {const args &#x3D; arguments;// We have to schedule such update so that some other operations can// been completed first. E.g., getForeignModel should be set up._.defer(function() {self.onGlobalProviderUpdate.apply(self, args);});};self._globalProviderListeners &#x3D; {update: onUpdate};self._globalProvider &#x3D; globalProvider;globalProvider.on(&#x27;update&#x27;, onUpdate);},/*** Stops listening to the change on the global provider.* It is usally used on the tearing down this mediator.*/stopListeningGlobalProvider: function() {const self: IWritableListMediatorDev &#x3D; this;const listeners &#x3D; self._globalProviderListeners;const globalProvider &#x3D; self._globalProvider;for (const key in listeners) {if (listeners.hasOwnProperty(key)) {globalProvider.off(key, listeners[key]);}}},/*** Start to listen to the change on the view data provider.* This method is invoked on binding a view to this mediator.*/startListeningViewProvider: function() {const self: IWritableListMediatorDev &#x3D; this;const onUpdate &#x3D; function(evtCtx, changeSet, rest) {self.onViewProviderUpdate(evtCtx, changeSet, rest);};self._viewProviderListeners &#x3D; {update: onUpdate};self._viewLevelData.on(&#x27;update&#x27;, onUpdate);},/*** Stops listening to the change on the view data provider.* This method is invoked on unbinding a view to this mediator.*/stopListeningViewProvider: function() {const self: IWritableListMediatorDev &#x3D; this;const listeners &#x3D; self._viewProviderListeners;for (const key in listeners) {if (listeners.hasOwnProperty(key)) {self._viewLevelData.off(key, listeners[key]);}}},/*** Override.* Compared its base counterpart, this method performs additional* checking on generating data for the view module, so that no repeated* items may be generated.* Simply because, the data in the view level data is distinct.* @returns {Array}*/safelyReadDataProvider: function(): any[] {const self: IWritableListMediatorDev &#x3D; this;let models &#x3D; self._super();models &#x3D; _.filter(models, function(elem) {return !_.some(self._viewLevelData.models, function(item) {return item.id &#x3D;&#x3D;&#x3D; elem.id;});});// Safely push these models into view level data providerself._viewLevelData.add(models, { silent: true });// Then returnreturn models;},/*** Override.* This method uses the data from the view level data, instead of the* the current remote data provider, to generate the list of data* to be rendered.*/renderData: function(async?: boolean) {const self: IWritableListMediatorDev &#x3D; this;const $data &#x3D; self._viewInstance.$data;$data.clean();$data.hasMoreData(self._dataProvider.hasNextPage());const newData &#x3D; self.generateItemsInternal(self._viewLevelData.models);if (async &#x3D;&#x3D;&#x3D; true) {$data.asyncPush(newData);} else {$data.syncPush(newData);}},/*** Override* @param {} options*/setUp: function(options) {const self: IWritableListMediatorDev &#x3D; this;self._super(options);if (self._globalProvider) {self.startListeningGlobalProvider(self._globalProvider);}},/*** Override*/tearDown: function() {const self: IWritableListMediatorDev &#x3D; this;// Call superself._super();// Tear off what we introduce in this classself._viewLevelData.off(&#x27;all&#x27;);self._viewLevelData.reset();// Stop listening to the globalif (self._globalProvider) {self.stopListeningGlobalProvider();}},/*** Override*/attachView: function(viewInstance) {const self: IWritableListMediatorDev &#x3D; this;self._super(viewInstance);// Start to listen to changes on the view data provider.self.startListeningViewProvider();},/*** Override*/detachView: function() {const self: IWritableListMediatorDev &#x3D; this;self._super();self.stopListeningViewProvider();}})</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in mediators/writable-abstract-list.ts:72</li>
						</ul>
					</aside>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-external-module tsd-is-not-exported">
					<a name="_" class="tsd-anchor"></a>
					<h3>_</h3>
					<div class="tsd-signature tsd-kind-icon">_<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol"> =&nbsp;dependencies.underscore</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in mediators/writable-abstract-list.ts:17</li>
						</ul>
					</aside>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-external-module tsd-is-not-exported">
					<a name="backbone" class="tsd-anchor"></a>
					<h3>backbone</h3>
					<div class="tsd-signature tsd-kind-icon">backbone<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol"> =&nbsp;dependencies.backbone</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in mediators/writable-abstract-list.ts:18</li>
						</ul>
					</aside>
				</section>
			</section>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="../globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="_controllers_list_controller_.html">"controllers/list-<wbr>controller"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="_mediators_abstract_list_.html">"mediators/abstract-<wbr>list"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="_mediators_interfaces_.html">"mediators/interfaces"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="_mediators_noop_view_instance_.html">"mediators/noop-<wbr>view-<wbr>instance"</a>
					</li>
					<li class="current tsd-kind-external-module">
						<a href="_mediators_writable_abstract_list_.html">"mediators/writable-<wbr>abstract-<wbr>list"</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-interface tsd-parent-kind-external-module">
						<a href="../interfaces/_mediators_writable_abstract_list_.ichangeset.html" class="tsd-kind-icon">IChange<wbr>Set</a>
					</li>
					<li class=" tsd-kind-interface tsd-parent-kind-external-module">
						<a href="../interfaces/_mediators_writable_abstract_list_.iwritablelistmediatorctoroptions.html" class="tsd-kind-icon">IWritable<wbr>List<wbr>Mediator<wbr>Ctor<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface tsd-parent-kind-external-module">
						<a href="../interfaces/_mediators_writable_abstract_list_.iwritablelistmediatordev.html" class="tsd-kind-icon">IWritable<wbr>List<wbr>Mediator<wbr>Dev</a>
					</li>
					<li class=" tsd-kind-interface tsd-parent-kind-external-module">
						<a href="../interfaces/_mediators_writable_abstract_list_.iwritablelistmediatorpublic.html" class="tsd-kind-icon">IWritable<wbr>List<wbr>Mediator<wbr>Public</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-external-module">
						<a href="_mediators_writable_abstract_list_.html#writablelistmediator" class="tsd-kind-icon">Writable<wbr>List<wbr>Mediator</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-external-module tsd-is-not-exported">
						<a href="_mediators_writable_abstract_list_.html#_" class="tsd-kind-icon">_</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-external-module tsd-is-not-exported">
						<a href="_mediators_writable_abstract_list_.html#backbone" class="tsd-kind-icon">backbone</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="../assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="../assets/js/search.js"><' + '/script>');</script>
</body>
</html>